<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Cline Webview</title>
	</head>
	<body>
		<!-- Block service worker IMMEDIATELY before anything else -->
		<script>
			(() => {
				if ('serviceWorker' in navigator) {
					// Unregister existing
					try {
						navigator.serviceWorker.getRegistrations().then(regs => {
							regs.forEach(reg => reg.unregister());
						});
					} catch(e) {}
					
					// Block new registrations with non-writable property
					try {
						Object.defineProperty(navigator.serviceWorker, 'register', {
							value: () => Promise.reject(new Error('SW blocked')),
							writable: false,
							configurable: false
						});
					} catch(e) {
						// Fallback if defineProperty fails
						navigator.serviceWorker.register = () => Promise.reject(new Error('SW blocked'));
					}
				}
				
				// Also block if someone tries to access it via window
				if (window.navigator && 'serviceWorker' in window.navigator) {
					try {
						delete window.navigator.serviceWorker;
					} catch(e) {}
				}
			})();
		</script>
		<div id="root"></div>
		<script type="module" src="/src/main.tsx"></script>
	</body>
</html>
